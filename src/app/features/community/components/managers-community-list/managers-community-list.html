<div class="container mx-auto my-auto">
  <div class="flex flex-wrap -mx-2 mb-3">
    <div class="w-6/12 flex items-center space-x-2">
      <span class="pi pi-user text-2xl! text-green-500!"></span>
      <h2 class="text-xl! font-medium">
        {{ 'MANAGERS_COMMUNITY_LIST.TITLE' | translate }}
      </h2>
    </div>
  </div>

  <p-table
    #dt
    [value]="users()"
    [tableStyle]="{ 'min-width': '50rem' }"
    [lazy]="true"
    (onLazyLoad)="lazyLoadUsers($event)"
  >
    <ng-template pTemplate="header">
      <tr>
        <th [pSortableColumn]="'name'" class="text-base px-3">
          {{ 'MANAGERS_COMMUNITY_LIST.HEADERS.NAME' | translate }}
          <p-sortIcon [field]="'name'"></p-sortIcon>
        </th>
        <th class="text-base px-3">
          {{ 'MANAGERS_COMMUNITY_LIST.HEADERS.EMAIL' | translate }}
        </th>
        <th class="text-base px-3">
          {{ 'MANAGERS_COMMUNITY_LIST.HEADERS.PHONE' | translate }}
        </th>
        <th [pSortableColumn]="'role'" class="text-base px-3">
          {{ 'MANAGERS_COMMUNITY_LIST.HEADERS.ROLE' | translate }}
          <p-sortIcon [field]="'role'"></p-sortIcon>
        </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-user>
      <tr>
        <td class="text-sm px-3 py-2">
          {{
            user.last_name
              ? user.first_name
                ? user.first_name + ' ' + user.last_name
                : user.last_name
              : user.first_name
                ? user.first_name
                : '/'
          }}
        </td>
        <td class="text-sm px-3 py-2">
          <a href="mailto:{{ user.email }}" class="text-blue-500 hover:underline">{{
            user.email
          }}</a>
        </td>
        <td class="text-sm px-3 py-2">
          @if (user.phone) {
            <a href="tel:{{ user.phone }}" class="text-blue-500 hover:underline">{{
              user.phone
            }}</a>
          } @else {
            /
          }
        </td>

        <td class="text-sm px-3 py-2">{{ user.role | role }}</td>
      </tr>
    </ng-template>
  </p-table>
</div>
