<p-table
  [value]="invitations()"
  [tableStyle]="{ 'min-width': '50rem' }"
  [lazy]="true"
  (onLazyLoad)="lazyLoadMemberInvitation($event)"
  [rows]="pagination().limit"
  [totalRecords]="pagination().total"
  [first]="(pagination().page - 1) * pagination().limit"
  [showCurrentPageReport]="true"
  [currentPageReportTemplate]="currentPageReportTemplateDocuments"
  (onPage)="pageChangeInvitation($event)"
  [paginator]="pagination().total_pages > 1"
  [loading]="loading()"
>
  <ng-template pTemplate="header">
    <tr>
      <th>
        {{ 'INVITATION.MEMBER.HEADERS.NAME' | translate }}
      </th>
      <th>
        {{ 'INVITATION.MEMBER.HEADERS.COMMUNITY' | translate }}
      </th>
      <th>{{ 'INVITATION.MEMBER.HEADERS.STATE' | translate }}</th>
      <th>
        {{ 'INVITATION.MEMBER.HEADERS.CREATED_AT' | translate }}
      </th>
      <th>
        {{ 'INVITATION.MEMBER.HEADERS.ACTIONS' | translate }}
      </th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-invitation>
    <tr>
      <td class="text-sm px-3 py-2">{{ invitation.user_email ?? '/' }}</td>
      <td class="text-sm px-3 py-2">{{ invitation.community.name }}</td>
      <td>
        @if (invitation.to_be_encoded) {
          <p-tag
            severity="warn"
            value="{{ 'INVITATION.MEMBER.TO_BE_ENCODED' | translate }}"
          ></p-tag>
        } @else {
          <p-tag severity="success" value="{{ 'INVITATION.MEMBER.ENCODED' | translate }}"></p-tag>
        }
      </td>
      <td class="text-sm px-3 py-2">
        {{ invitation.created_at | date: 'dd/MM/yyyy' }}
      </td>
      <td class="flex gap-3">
        @if (invitation.to_be_encoded) {
          <p-button
            label="{{ 'INVITATION.MEMBER.ENCODE_AND_ACCEPT' | translate }}"
            severity="success"
            (click)="encodeNewMember(invitation)"
          ></p-button>
          <p-button
            label="{{ 'INVITATION.MEMBER.REFUSE' | translate }}"
            severity="danger"
            (click)="refuseInvitation(invitation)"
          ></p-button>
        } @else {
          <p-button
            label="{{ 'INVITATION.MEMBER.ACCEPT' | translate }}"
            severity="success"
            (click)="acceptInvitation(invitation)"
          ></p-button>
          <p-button
            label="{{ 'INVITATION.MEMBER.REFUSE' | translate }}"
            severity="danger"
            (click)="refuseInvitation(invitation)"
          ></p-button>
          <p-button
            label="{{ 'INVITATION.MEMBER.SEE' | translate }}"
            severity="help"
            (click)="fetchDetail(invitation)"
          ></p-button>
        }
      </td>
    </tr>
  </ng-template>
  <ng-template #emptyMessage pTemplate="emptymessage">
    <tr>
      <td colspan="6" style="text-align: center" class="text-base">
        {{ 'INVITATION.MEMBER.NO_INVITATIONS_AVAILABLE' | translate }}
      </td>
    </tr>
  </ng-template>
</p-table>
